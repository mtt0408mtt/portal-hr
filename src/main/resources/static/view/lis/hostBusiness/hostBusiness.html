<style type="text/css">
.focus{
background-color:#cccccc
}

.odd{
color:#0026ff
}

.even{
color:#ff0000
}




</style>

<div class="sub-nav hidden-sm hidden-xs">
    <ul>
        <li><a href="" class="heading">上机主业务</a>
        </li>
    </ul>
</div>
<div class="dashboard-wrapper">
    <div class="items">
        <span class="dian1 dian1_2"></span> 请选择日期
        <input  class="form-control" type="date" name="" style="width: 130px" ng-model="hb.headDate" ng-change="change_headDate()" >
        <span class="">
            <label>
                <input id="" type="checkbox" class="tree-checkbox" style="vertical-align: middle" ng-model="hb.today_checkbox" ng-click="to_today()">当天
            </label>
        </span>
        <span id="" class="itemClick"><i class="itemIcon fa fa-sync"></i>刷新</span>
        <span id="" class="itemClick"><i class="itemIcon fa fa-save"></i>保存</span>
        <span id="" class="itemClick"><i class="itemIcon fa fa-file-alt"></i>审核</span>
        <span id="" class="itemClick"><i class="itemIcon fa fa-times"></i>取消审核</span>
        <span id="" class="itemClick"><i class="itemIcon fa fa-search"></i>危急结果查询</span>
        <span id="" class="itemClick"><i class="itemIcon fa fa-search"></i>历史结果查询</span>
        <span id="" class="itemClick"><i class="itemIcon fa fa-file-alt"></i>批量审核</span>
        <span id="" class="itemClick"><i class="itemIcon fa fa-save"></i>批量保存</span>
        <span id="" class="itemClick"><i class="itemIcon fa fa-times"></i>撤回发布</span>
        <span id="" class="itemClick"><i class="itemIcon fa fa-print"></i>打印</span>
        <span id="" class="itemClick"><i class="itemIcon fa fa-times"></i>删除样本</span>
    </div>
    <div class="widget" style="margin-top: 10px;">
    
        <div class="widget-body" style="padding-top: 7px">
          <form name="hb_form"  >
            <div class="inputs row">
                <div class="inputs_item col-lg-3 col-md-4">
                    <span class="dian1 dian1_2"></span>
                    <span class="inputName">选择仪器</span>
                    <select class="form-control" ng-disabled="hb.instrumentObj" ng-model="hb.dic_instrument" ng-change="selectInstrument()">
                        <option ng-repeat="a in dict_instruments" value="{{a.id}},{{a.code}}">{{a.name}}</option>
                    </select>
                </div>
                <div class="inputs_item col-lg-3 col-md-4">
                    <span class="dian1 dian1_2"></span>
                    <span class="inputName">样本号:</span ><span ng-bind="hb.headDate |date : 'yyyyMMdd'"></span>&nbsp;<span ng-bind="hb.dic_instrument.split(',')[1]"></span>
                    <input type="text" name="ybh_seq" focus-on="ybh" ng-model="hb.ybh_seq" ng-disabled="hb.ybhObj"   ng-keyup="to_padZero($event)" class="form-control" style="width: 46%;width:calc(63% - 65px); " />
	
                </div>
                <div class="inputs_item col-lg-3 col-md-4">
                    <span class="dian1 dian1_2"></span>
                    <span class="inputName">条码号</span>
                    <input type="text" name="tmh" focus-on="tmh" ng-pattern="/^[0-9]{12}$/" ng-model="hb.tmh" ng-disabled="hb.tmhObj"  class="form-control"  ng-required="true"  />
                    
                    <div
										ng-show="hb_form.tmh.$dirty && hb_form.tmh.$error.pattern" 
										class="alert alert-danger help-block">12位数字</div>
                    <div 
										ng-show="hb_form.tmh.$dirty && hb_form.tmh.$error.required" 
										class="alert alert-danger help-block">必填</div>										
										
                </div>
            </div>
            <hr class="hr1" />
            <div class="inputs row">
                <div class="inputs_item col-lg-3 col-md-4">
                    <span class="dian1 dian1_2"></span>
                    <span class="inputName">送检单位</span>
                    <input type="text" name="sjdwmc" ng-model="hb.sjdwmc" class="form-control"  readOnly="readonly" />
                </div>
                <div class="inputs_item col-lg-3 col-md-4">
                    <span class="dian1 dian1_2"></span>
                    <span class="inputName">门诊/住院号</span>
                    <input type="text" name="mzhm" ng-model="hb.mzhm" class="form-control"  />
                </div>
                <div class="inputs_item col-lg-3 col-md-4">
                    <span class="dian1 dian1_2"></span>
                    <span class="inputName">病人姓名</span>
                    <input type="text" name="brxm" ng-model="hb.brxm" ng-requird="true" class="form-control" style="width: 36%;width:calc(63% - 108px); " />
                    <span class="inputName" style="width: 30px;">性别</span>
                    <select name="age_unit" class="form-control"  style="width: 70px;margin: 0px" ng-model="hb.sex" ng-requird="true">
                        <!--   <option value="">请选择</option>-->
                        <option value="1">男</option>
                        <option value="2">女</option>
                    </select>
                </div>
                <div class="inputs_item col-lg-3 col-md-4">
                    <span class="dian1 dian1_2"></span>
                    <span class="inputName">年龄</span>
                    <input type="text" name="age" class="form-control"  style="width: 26%;width:calc(63% - 146px); " ng-model="hb.age" ng-requird="true"/>
                    <select class="form-control" style="width: 44px;height: 26px;margin: 0px;" ng-model="hb.nldw"  ng-requird="true">
                        <option value="岁">岁</option>
                        <option value="月">月</option>
                        <option value="天">天</option>
                        <option value="时">时</option>
                        <option value="分">分</option>
                    </select>
                    <label>
                        <input id="" type="checkbox" class="tree-checkbox" style="vertical-align: middle" ng-model="hb.yepb">婴儿
                    </label>
                   <!--  <label>
                        <input id="" type="checkbox" class="tree-checkbox" style="vertical-align: middle" >加急
                    </label> -->
                </div>
                <div class="inputs_item col-lg-3 col-md-4">
                    <span class="dian1 dian1_2"></span>
                    <span class="inputName">科室</span>
                    <input type="text" name="sqks" class="form-control" ng-model="hb.sqks" style="width: 36%;width:calc(63% - 108px); " />
                    <span class="inputName"  style="width: 30px;">床号</span>
                    <input type="text" name="bedNo" ng-model="hb.bedNo" class="form-control"  style="width: 70px;" />
                </div>
                <div class="inputs_item col-lg-3 col-md-4">
                    <span class="dian1 dian1_2"></span>
                    <span class="inputName">标本来源</span>
                     <select class="form-control" ng-model="hb.patient_type" style="width: 51%" ng-requird="true">
                        <option ng-repeat="a in dict_patient_type" value="{{a.id}}">{{a.name}}</option>
                    </select>

                </div>
                <div class="inputs_item col-lg-3 col-md-4">
                    <span class="dian1 dian1_2"></span>
                    <span class="inputName">样本性状</span>
                     <select select2 ng-model="hb.sample_status" class="form-control" placeholder="{{hb.sample_status_name}}" ng-requird="true">
                        <option ng-repeat="a in dict_sample_status" value="{{a.id}}">{{a.name}},{{a.id}}</option>
                    </select>
                </div>
                <div class="inputs_item col-lg-3 col-md-4">
                    <span class="dian1 dian1_2"></span>
                    <span class="inputName">样本类型</span>
	                <select select2 ng-model="hb.sample_type" class="form-control" placeholder="{{hb.sample_type_name}}" ng-requird="true">
	                      <option ng-repeat="a in dict_sample_type" value="{{a.id}}">{{a.name}},{{a.id}}</option>
	                </select>   
                </div>
                <div class="inputs_item col-lg-3 col-md-4">
                    <span class="dian1 dian1_2"></span>
                    <span class="inputName">临床诊断</span>
                    <input type="text" name="" class="form-control" ng-model="hb.ynzd" />
                </div>
                <div class="inputs_item col-lg-3 col-md-4">
                    <span class="dian1 dian1_2"></span>
                    <span class="inputName">备注</span>
                    <input name="comment" class="form-control" type="text"  ng-model="hb.bz" />
                </div>
            </div>
            <hr class="hr1" />
            <div class="inputs row">
                <div class="inputs_item col-lg-3 col-md-4">
                    <span class="dian1 dian1_2"></span>
                    <span class="inputName">检验目的</span>
                    <input type="text" name="zhmcStr" class="form-control"  ng-model="hb.zhmcStr" readOnly="readonly"/>
                </div>
                <div class="inputs_item col-lg-3 col-md-4">
                    <span class="dian1 dian1_2"></span>
                    <span class="inputName">执行时间</span>
                    <input type="date" name="zxsj" class="form-control"  ng-model="hb.zxsj" readOnly="readonly" />
                </div>
                <div class="inputs_item col-lg-3 col-md-4">
                    <span class="dian1 dian1_2"></span>
                    <span class="inputName">接收时间</span>
                    <input type="date" name="jssj" class="form-control" ng-model="hb.jssj" readOnly="readonly"  />
                </div>
                <div class="inputs_item col-lg-3 col-md-4">
                    <span class="dian1 dian1_2"></span>
                    <span class="inputName">初审人</span>
                    <input type="text" name="csr" class="form-control"   style="width: 33%;width:calc(63% - 118px); " ng-model="hb.csr" readOnly="readonly" />
                    <span class="inputName" style="width: 40px;">复审人</span>
                    <input type="text" name="fsr" class="form-control"  style="width: 70px;" ng-model="hb.fsr" readOnly="readonly"/>
                </div>
                <div class="inputs_item col-lg-3 col-md-4">
                    <span class="dian1 dian1_2"></span>
                    <span class="inputName">初审时间</span>
                    <input type="date" name="cssj" class="form-control" ng-model="hb.cssj" readOnly="readonly"  />
                </div>
                <div class="inputs_item col-lg-3 col-md-4">
                    <span class="dian1 dian1_2"></span>
                    <span class="inputName">复审时间</span>
                    <input type="date" name="fssj" class="form-control" ng-model="hb.fssj" readOnly="readonly" />
                </div>
                <div class="inputs_item col-lg-3 col-md-4">
                    <span class="dian1 dian1_2"></span>
                    <span class="inputName">检验者</span>
                    <input type="text" name="jyr" class="form-control" ng-model="hb.jyr" readOnly="readonly" />
                </div>
                <div class="inputs_item col-lg-3 col-md-4">
                    <span id=""  style="width: 77%;text-align: center;padding: 2px 20px;" ng-click="updateObj()"   ng-class="{ 'itemClick':!hb_form.$invalid,  'btn':hb_form.$invalid}" ng-disabled="hb_form.$invalid"  ><i class="itemIcon fa fa-save"></i>修改</span>
                </div>
            </div>
            <div class="clearfix"></div>
        	</form>
        
        </div>
    </div>
    <div class="col-lg-6 col-md-6">
        <div class="widget">
            <div class="title1">
                <span ng-click="addGroup()" >添加&nbsp;<i class="fa fa-plus"></i></span>
            </div>
            <div class="widget-body" style="padding-top: 0px;">
                <table class="table ">
                    <thead>
                        <tr class="info" role="row">
                            <th>
                                项目编号
                            </th>
                            <th>
                                英文缩写
                            </th>
                            <th>
                                检验项目
                            </th>
                            <th>
                                结果
                            </th>
                            <th>
                                提示
                            </th>
                            <th>
                                参考范围
                            </th>
                            <th>
                                参考低值
                            </th>
                            <th>
                                参考高值
                            </th>
                            <th>
                                警戒提示
                            </th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td class="" ng-bind="">xx
                            </td>
                            <td class="" ng-bind="">xx
                            </td>
                            <td class="" ng-bind="">xx
                            </td>
                            <td class="" ng-bind="">xx
                            </td>
                            <td class="" ng-bind="">xx
                            </td>
                            <td class="" ng-bind="">xx
                            </td>
                            <td class="" ng-bind="">xxx
                            </td>
                            <td class="" ng-bind="">xx
                            </td>
                            <td class="" ng-bind="">xx
                            </td>
                        </tr>
                    </tbody>
                </table>
                <div class="clearfix">
                </div>
            </div>
        </div>
    </div>
    <div class="col-lg-6 col-md-6">
        <div class="widget">
            <div class="items">
                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                <span class="dian1 dian1_2"></span>病人类型
                <select class="form-control" style="width:120px;margin-top: 2px" name="brlx" id="LjgTmxxGridForm_brlx">
                    <option value="">--请选择--</option>
                    <option value="1">门诊</option>
                    <option value="2">急诊</option>
                    <option value="3">住院</option>
                    <option value="4">体检</option>
                    <option value="5">保险机构</option>
                    <option value="6">本中心</option>
                    <option value="9">其他</option>
                </select> -
                <select class="form-control" style="width:120px;margin-left: 2px;margin-top: 2px" name="tmzt" id="LjgTmxxGridForm_tmzt">
                    <option value="">--请选择--</option>
                    <option value="5">上机接收完毕</option>
                    <option value="5">上机接收中</option>
                    <option value="7">初审</option>
                    <option value="6">取消初审</option>
                    <option value="9">复审</option>
                    <option value="8">取消复审</option>
                    <option value="10">发布</option>
                    <option value="11">打印</option>
                </select>
                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                <span class="dian1 dian1_2"></span>姓名
                <input class="form-control" type="text" name="" style="width:120px;">
                <span id="" class="itemClick"><i class="itemIcon fa fa-times"></i>清空条件</span>
            </div>
            <div class="widget-body" style="padding-top: 0px;">
                <table class="table ">
                    <thead>
                        <tr class="info" role="row">
                            <th>
                                序号
                            </th>
                            <th>
                                状态
                            </th>
                            <th>
                                条码号
                            </th>
                            <th>
                                样本号
                            </th>
                            <th>
                                姓名
                            </th>
                            <th>
                                性别
                            </th>
                            <th>
                                年龄
                            </th>
                            <th>
                                类型
                            </th>                                                        
                        </tr>
                    </thead>
                    <tbody> 
                        <tr  ng-repeat="data in tmxxList" ng-dblclick="getObj(data,$index)" ng-class='{focus:$index==focus}'>
                            <td class="" ng-bind="$index+1">
                            </td>
                            <td class="" ng-bind="data.tmztName">
                            </td>
                            <td class="" ng-bind="data.tmh">
                            </td>
                            <td class="" ng-bind="data.ybhm">
                            </td>
                            <td class="" ng-bind="data.brxm">
                            </td>
                            <td class="" ng-bind="data.sex==2?'女':'男'">
                            </td>
                            <td class="" ng-bind="data.ageStr">
                            </td>  
                            <td class="" ng-bind="data.brlxName">
                            </td>                                                        
                        </tr>
                    </tbody>
                </table>
                <div class="clearfix">
                </div>
            </div>
        </div>
    </div>
    <div id="rightNav" class="" style="position:fixed; left:-50%;width: 50%; bottom: 60px;border: 1px solid #48bfdc;background: #fff;">
        <div id="navImg">
            标本过程监控
        </div>
        <div style="height:160px;width:94%;width: calc(100% - 22px);float:right;position: relative;left: 10px;margin: 10px 0;">
            <table class="table">
                <thead>
                    <tr class="info" role="row">
                        <th>
                            操作时间
                        </th>
                        <th>
                            操作人
                        </th>
                        <th>
                            操作科室
                        </th>
                        <th>
                            操作内容
                        </th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td class="" ng-bind="">xx
                        </td>
                        <td class="" ng-bind="">xx
                        </td>
                        <td class="" ng-bind="">xx
                        </td>
                        <td class="" ng-bind="">xx
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>
</div>
<div aria-hidden="true" aria-labelledby="myModalLabel" class="modal fade" id="alert1" role="dialog">
    <form class="form-horizontal" name="add_form">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <button aria-hidden="true" class="close" data-dismiss="modal" ng-click="reset_comb()" type="button">
                        ×
                    </button>
                    <h4 class="modal-title" id="myModalLabel">
                        添加
                    </h4>
                    <div class="groups">
                        <span ng-repeat="comb in apply.combs" class="itemClick" style="fload:left">{{comb.split(',')[1]}}<i class="itemClose fa fa-times" ng-click="removeComb(comb)"></i></span>
                    </div>
                </div>
                <div class="modal-body">
                    <div class="inputs row">
                        <div class="inputs_item col-lg-6 col-md-6">
                            <span class="dian1 dian1_2"></span> 项目查找
                            <input type="text" class="form-control" style="width: 100px"/>
                        </div>
                        <div class="inputs_item col-lg-6 col-md-">
                            <span class="dian1 dian1_2"></span> 拼音码
                            <input type="text" class="form-control" style="width: 100px"/>
                        </div>
                    </div>
                    <table class="table table-condensed table-striped table-hover table-bordered pull-left dataTable">
                        <thead>
                            <tr class="info" role="row">
                                <th>
                                    中文名称
                                </th>
                                <th>
                                    英文名称
                                </th>
                                <th>
                                    中文简称
                                </th>
                                <th>
                                    项目分类
                                </th>
                                <th>
                                    是否计算项目
                                </th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr ng-dblclick="addComb(data)">
                                <td>
                                </td>
                                <td>
                                </td>
                                <td>
                                </td>
                                <td>
                                </td>
                                <td>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                    <div style="text-align: center;">
                        <p>总共{{page.totalCount}}条记录，第{{page.currentPage}}/{{page.totalPages}}页</p>
                        <button class="btn btn-primary" ng-disabled="page.currentPage<=1" ng-click="go(page.currentPage - 1)">上一页</button>
                        <button class="btn btn-primary" ng-disabled="page.currentPage >= page.totalPages" ng-click="go(page.currentPage + 1)">下一页</button>
                    </div>
                </div>
                <div class="modal-footer">
                    <button class="btn btn-default" ng-click="reset_comb()" type="button">
                        重置
                    </button>
                    <button class="btn btn-primary" ng-click="append()" type="button">
                        保存
                    </button>
                </div>
            </div>
        </div>
    </form>
</div>
<div aria-hidden="true" aria-labelledby="myModalLabel" class="modal fade" id="alert1" role="dialog">
    <form class="form-horizontal" name="add_form">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <button aria-hidden="true" class="close" data-dismiss="modal" ng-click="reset_comb()" type="button">
                        ×
                    </button>
                    <h4 class="modal-title" id="myModalLabel">
                        条目
                    </h4>
                               
            <div class="groups"  >
                <span ng-repeat="comb in apply.combs" class="itemClick"  style="fload:left">{{comb.split(',')[1]}}<i class="itemClose fa fa-times" ng-click="removeComb(comb)"></i></span>
            </div>
                </div>
                <div class="modal-body">
                    <div class="inputs row">
                        <div class="inputs_item col-lg-7 col-md-7">
                            <span class="dian1 dian1_2"></span>
                            项目查找
                            <select class="form-control" style="width: 100px" ng-model="apply.comb_condition">
                                <option value="0">拼音码</option>
                                <option value="1">五笔码</option>
                                <option value="2">中文</option>
                                <option value="3">组合ID</option>
                            </select>
                            <input type="text" name="comb_search_name" class="form-control" style="width: 150px" ng-model="search.comb_search_name" ng-keyup="myCombKeyup($event)" />
                        </div>
                        <div class="inputs_item col-lg-5 col-md-5">
                            <span class="dian1 dian1_2"></span>
                            项目分类

                                
                            <select class="form-control" ng-model="apply.comb_category" ng-change="change_category()" >
                                <option  value="999">所有</option>
                                <option ng-repeat="a in dict_comb_category" value="{{a.id}}">{{a.name}}</option>
                             </select>
                        </div>
                    </div>
                     <table class="table table-condensed table-striped table-hover table-bordered pull-left dataTable">
                        <thead >
                            <tr class="info" role="row">
                            
                                <th>
                                    组合ID
                                </th>
                                <th>
                                    组合名称
                                </th>
                                <th>
                                    拼音码
                                </th>
                                <th>
                                    五笔码
                                </th>
                                <th>
                                    类别名称
                                </th>
                            </tr>
                        </thead>
                        <tbody ng-repeat=" data in dict_combination">
                            <tr ng-dblclick="addComb(data)">
                                <td class="" ng-bind="data.zhid" >
                                </td>
                                <td class="" ng-bind="data.zhmc">
                                </td>
                                <td class="" ng-bind="data.pym">
                                </td>
                                <td class="" ng-bind="data.wbm">
                                </td>
                                <td class="" ng-bind="data.lbmc">
                                </td>
                            </tr>
                        </tbody>
                    </table>
                    <div style="text-align: center;">
                        <p>总共{{page.totalCount}}条记录，第{{page.currentPage}}/{{page.totalPages}}页</p>
                        <button class="btn btn-primary" ng-disabled="page.currentPage<=1" ng-click="go(page.currentPage - 1)">上一页</button>
                        <button class="btn btn-primary" ng-disabled="page.currentPage >= page.totalPages" ng-click="go(page.currentPage + 1)">下一页</button>
                    </div>
                </div>
                <div class="modal-footer">
                    <button class="btn btn-default" ng-click="reset_comb()" type="button">
                        重置
                    </button>
                    <button class="btn btn-primary" ng-click="append()"  type="button">
                        保存
                    </button>
                </div>
            </div>
        </div>
    </form>
</div>

<style type="text/css">
#navImg {
    float: right;
    width: 22px;
    left: 23px;
    top: -1px;
    position: relative;
    background: #3cb9aa;
    color: #fff;
    text-align: center;
    border-radius: 0 6px 6px 0;
}
.hr1 {
    margin-top: 6px;
    margin-bottom: 6px;
}
.form-control {
    width: 63%;
}
</style>